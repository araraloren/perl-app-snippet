#!/usr/bin/env perl6

use Pluggable;
use Getopt::Advance;
use App::snippet;

my @plugins = [];

for plugins("App", :plugins-namespace<snippet>) -> $plugin {
    @plugins.push($plugin.WHO<Compiler>.new);
}

my ($optset, @) = getopt(|(@plugins>>.optionset), :autohv);

for @plugins -> $plugin {
    if $optset.VAR.WHERE == $plugin.optionset.VAR.WHERE {
        my $target = $plugin.compile();

        $target.process();
    }
}
